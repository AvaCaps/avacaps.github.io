{% assign caps = include.colcat | group_by: 'maker' %}
{% assign sortedcaps = caps | sort: 'maker' %}

<section class="gallery {{ page.tags | downcase }}">
    {% for keycap in sortedcaps %}
        {% if keycap.tags contains include.coltag %}
            <article class="{{ include.coltag | downcase }}">
                <!-- <a href="{{ post.url  | relative_url }}" class="link"> -->
                    {% if keycap.image contains 'http' %}
                    <span class="image" style="background-image: url({{ keycap.image }});"></span>
                    {% else %}
                    <span class="image" style="background-image: url(../{{ keycap.image }});"></span>
                    {% endif %}
                    <span class="flair"></span>
                    <header class="major">
                        <h3>{{ keycap.colorway }} {{ keycap.sculpt }}</h3>
                        <p>{{ keycap.maker }}</p>
                    </header>
                <!-- </a> -->
            </article>
        {% endif %} 
    {% endfor %}
    <article class="fill-empty-space"></article>
    <article class="fill-empty-space"></article>
    <article class="fill-empty-space"></article>
</section>